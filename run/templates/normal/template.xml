<?xml version="1.0"?>

<Template name="Chilli's" author="ChilliAxe and Haven King" width="3288" height="4488"
          proximity_version="0.5.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../../../template.xsd">
    <options>
        <Enumeration id="border" default="black">
            <EnumerationValue value="black"/>
            <EnumerationValue value="gold" id="gold"/>
            <EnumerationValue value="silver"/>
            <EnumerationValue value="none"/>
        </Enumeration>
        <ToggleOption id="bottom_text_outline" default="false"/>
        <ToggleOption id="copyright" default="true"/>
        <ToggleOption id="flavor_text" default="true"/>
        <ToggleOption id="flavor_bar" default="true"/>
        <ToggleOption id="show_set_symbol" default="true"/>
    </options>
    <imports>
        <import src="symbols"/>
        <import src="styles"/>
    </imports>
    <plugins>
        <import repository="https://hephaestus.dev/release" group="dev.hephaestus" artifact="proximity-mtg" version=">=1.0.0"/>
    </plugins>
    <condition_definitions>
        <ConditionDefinition name="colorless_artifact">
            <IsPresent key="proximity.mtg.types.artifact"/>
            <IsEquals key="proximity.mtg.color_count" value="0"/>
        </ConditionDefinition>
        <ConditionDefinition name="one_or_two_colors">
            <Range key="proximity.mtg.color_count" min="1" max="2"/>
        </ConditionDefinition>
    </condition_definitions>
    <resources>
        <resource type="assets" location="https://hephaestus.dev/proximity/resources/set_symbols" version="1.0.0"/>
    </resources>
    <layers>
        <Selector>
            <ImageLayer id="cardback">
                <conditions>
                    <IsPresent key="proximity.options.use_card_back"/>
                    <IsEquals key="proximity.options.use_card_back"/>
                    <IsPresent key="proximity.mtg.is_card_back"/>
                    <IsEquals key="proximity.mtg.is_card_back"/>
                </conditions>
            </ImageLayer>
            <Group>
                <ImageLayer id="art" x="352" y="605" width="2584" height="1882" url="${image_uris.art_crop}">
                    <conditions>
                        <Not>
                            <IsEquals key="proximity.options.art_source" value="NONE"/>
                        </Not>
                    </conditions>
                </ImageLayer>
                <Selector id="backgrounds">
                    <Selector id="nyx">
                        <ImageLayer id="artifact">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.artifact"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colorless">
                            <conditions>
                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colored" src="$join{colors}">
                            <conditions>
                                <IsEquals key="proximity.mtg.color_count" value="1"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="gold"/>
                        <conditions>
                            <IsPresent key="frame_effects.nyxtouched"/>
                        </conditions>
                    </Selector>
                    <Selector id="standard">
                        <ImageLayer id="vehicle">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="artifact">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="land">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.land"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colored" src="$join{colors}">
                            <conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="gold">
                            <conditions>
                                <Range key="proximity.mtg.color_count" min="2"/>
                            </conditions>
                        </ImageLayer>
                    </Selector>
                    <conditions>
                        <Not>
                            <IsEquals key="proximity.options.border" value="none"/>
                        </Not>
                    </conditions>
                </Selector>
                <Selector id="shadows">
                    <ImageLayer id="legendary">
                        <conditions>
                            <IsPresent key="proximity.mtg.types.legendary"/>
                        </conditions>
                    </ImageLayer>
                    <ImageLayer id="mdfc">
                        <conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </conditions>
                    </ImageLayer>
                    <Selector id="transform">
                        <ImageLayer id="front">
                            <conditions>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="back"/>
                        <conditions>
                            <IsEquals key="layout" value="transform"/>
                        </conditions>
                    </Selector>
                    <ImageLayer id="normal"/>
                </Selector>
                <Selector id="pinlines">
                    <Fork id="modal">
                        <Fork>
                            <Selector>
                                <ImageLayer id="artifact">
                                    <conditions>
                                        <IsEquals key="colorless_artifact"/>
                                        <IsPresent key="proximity.mtg.types.land" value="false"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colorless">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colored" src="$join{colors}">
                                    <conditions>
                                        <IsEquals key="one_or_two_colors"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="gold"/>
                            </Selector>
                            <branches>
                                <Branch id="land">
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Branch>
                                <Branch id="standard"/>
                            </branches>
                        </Fork>
                        <branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </branches>
                        <conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </conditions>
                    </Fork>
                    <Fork id="transform">
                        <Selector>
                            <ImageLayer id="artifact">
                                <conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="colorless">
                                <conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="colored" src="$join{colors}">
                                <conditions>
                                    <IsEquals key="one_or_two_colors"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="gold"/>
                        </Selector>
                        <branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </branches>
                        <conditions>
                            <IsEquals key="layout" value="transform"/>
                        </conditions>
                    </Fork>
                    <ImageLayer id="miracle" src="miracle/$join{colors}">
                        <conditions>
                            <IsPresent key="frame_effects.miracle"/>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                        </conditions>
                    </ImageLayer>
                    <Selector id="mutate">
                        <ImageLayer id="colorless">
                            <conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colored" src="$join{colors}">
                            <conditions>
                                <IsEquals key="one_or_two_colors"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="gold"/>
                        <conditions>
                            <IsPresent key="keywords.mutate"/>
                        </conditions>
                    </Selector>
                    <Fork id="standard">
                        <Fork>
                            <Selector>
                                <ImageLayer id="artifact">
                                    <conditions>
                                        <IsEquals key="colorless_artifact"/>
                                        <IsPresent key="proximity.mtg.types.land" value="false"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colorless">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colored" src="$join{colors}">
                                    <conditions>
                                        <IsEquals key="one_or_two_colors"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="gold"/>
                            </Selector>
                            <branches>
                                <Branch id="land">
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Branch>
                                <Branch id="standard"/>
                            </branches>
                        </Fork>
                        <branches>
                            <Branch id="snow">
                                <IsPresent key="proximity.mtg.types.snow"/>
                            </Branch>
                            <Branch id="standard"/>
                        </branches>
                    </Fork>
                </Selector>
                <Fork id="border">
                    <Fork>
                        <ImageLayer src="${proximity.options.border}"/>
                        <branches>
                            <Branch id="legendary">
                                <IsPresent key="proximity.mtg.types.legendary"/>
                            </Branch>
                            <Branch id="standard"/>
                        </branches>
                    </Fork>
                    <branches>
                        <Branch id="mdfc">
                            <IsEquals key="layout" value="modal_dfc"/>
                        </Branch>
                        <Branch id="transform">
                            <IsEquals key="layout" value="transform"/>
                            <IsEquals key="proximity.mtg.front_face"/>
                        </Branch>
                        <Branch id="standard"/>
                    </branches>
                    <conditions>
                        <Not>
                            <IsEquals key="proximity.options.border" value="none"/>
                        </Not>
                    </conditions>
                </Fork>
                <Fork id="crowns">
                    <Selector>
                        <ImageLayer id="colored" src="$join{colors}">
                            <conditions>
                                <IsEquals key="one_or_two_colors"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="artifact">
                            <conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colorless">
                            <conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                                <Not>
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Not>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="land">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.land"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="gold"/>
                    </Selector>
                    <branches>
                        <Branch id="companion">
                            <IsPresent key="frame_effects.companion"/>
                        </Branch>
                        <Branch id="legendary">
                            <IsPresent key="proximity.mtg.types.legendary"/>
                        </Branch>
                    </branches>
                </Fork>
                <Selector id="crowns.companion.gems">
                    <ImageLayer id="monocolored" src="$join{colors}">
                        <conditions>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                        </conditions>
                    </ImageLayer>
                    <ImageLayer id="artifact">
                        <conditions>
                            <IsEquals key="colorless_artifact"/>
                            <IsPresent key="proximity.mtg.types.land" value="false"/>
                        </conditions>
                    </ImageLayer>
                    <ImageLayer id="colorless">
                        <conditions>
                            <Or>
                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                                <And>
                                    <IsEquals key="proximity.mtg.color_count" value="2"/>
                                    <IsEquals key="proximity.mtg.hybrid"/>
                                </And>
                            </Or>
                        </conditions>
                    </ImageLayer>
                    <ImageLayer id="gold"/>
                    <conditions>
                        <IsPresent key="frame_effects.companion"/>
                    </conditions>
                </Selector>
                <Selector id="plates">
                    <Fork id="mdfc">
                        <Selector>
                            <ImageLayer id="monocolored" src="$join{colors}">
                                <conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="artifact">
                                <conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="colorless">
                                <conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <Not>
                                        <IsPresent key="proximity.mtg.types.land"/>
                                    </Not>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="hybrid">
                                <conditions>
                                    <Or>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            <IsEquals key="proximity.mtg.hybrid"/>
                                        </And>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="0"/>
                                            <IsPresent key="proximity.mtg.types.land"/>
                                        </And>
                                    </Or>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="gold"/>
                        </Selector>
                        <branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </branches>
                        <conditions>
                            <Or>
                                <IsEquals key="layout" value="modal_dfc"/>
                                <IsEquals key="layout" value="transform"/>
                            </Or>
                        </conditions>
                    </Fork>
                    <ImageLayer id="miracle" src="miracle/$join{colors}">
                        <conditions>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                            <IsPresent key="frame_effects"/>
                            <IsPresent key="frame_effects.miracle"/>
                        </conditions>
                    </ImageLayer>
                    <Fork id="standard">
                        <Selector>
                            <ImageLayer id="monocolored" src="$join{colors}">
                                <conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="artifact">
                                <conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="colorless">
                                <conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <Not>
                                        <IsPresent key="proximity.mtg.types.land"/>
                                    </Not>
                                </conditions>
                            </ImageLayer>
                            <Selector>
                                <ImageLayer id="colorless">
                                    <conditions>
                                        <IsPresent key="proximity.mtg.types.snow"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="hybrid"/>
                                <conditions>
                                    <Or>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            <IsEquals key="proximity.mtg.hybrid"/>
                                        </And>
                                        <And>
                                            <Or>
                                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                                                <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            </Or>
                                            <IsPresent key="proximity.mtg.types.land"/>
                                        </And>
                                    </Or>
                                </conditions>
                            </Selector>
                            <ImageLayer id="land">
                                <conditions>
                                    <IsPresent key="proximity.mtg.types.land"/>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                </conditions>
                            </ImageLayer>
                            <ImageLayer id="gold"/>
                        </Selector>
                        <branches>
                            <Branch id="snow">
                                <IsPresent key="proximity.mtg.types.snow"/>
                            </Branch>
                            <Branch id="standard"/>
                        </branches>
                    </Fork>
                </Selector>
                <SquishBox id="title_bar">
                    <main id="cost">
                        <HorizontalLayout x="2925" y="503" alignment="end">
                            <SpacingLayer width="50" height="15"/>
                            <TextLayer value="${mana_cost}">
                                <Style font="NDPMTG" size="175">
                                    <shadow color="#000000" dX="-4" dY="11"/>
                                </Style>
                            </TextLayer>
                        </HorizontalLayout>
                    </main>
                    <flex>
                        <Selector id="name">
                            <Selector id="dfc">
                                <TextLayer x="665" y="506" value="${name}">
                                    <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                                    <conditions>
                                        <IsEquals key="proximity.mtg.front_face"/>
                                    </conditions>
                                </TextLayer>
                                <TextLayer x="665" y="506" value="${name}">
                                    <Style font="Beleren2016-Bold" color="#FFFFFF" size="160"/>
                                    <conditions>
                                        <IsEquals key="proximity.mtg.front_face" value="false"/>
                                    </conditions>
                                </TextLayer>
                                <conditions>
                                    <IsPresent key="layout"/>
                                    <Or>
                                        <IsEquals key="layout" value="modal_dfc"/>
                                        <IsEquals key="layout" value="transform"/>
                                    </Or>
                                </conditions>
                            </Selector>
                            <TextLayer x="380" y="506" value="${name}">
                                <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                            </TextLayer>
                        </Selector>
                    </flex>
                </SquishBox>
                <TextLayer id="flipped.power_and_toughness" x="2925" y="3790" alignment="right" value="${proximity.flipped.power}/${proximity.flipped.toughness}">
                    <Style font="Beleren2016-Bold" color="#494949" size="100"/>
                    <conditions>
                        <IsPresent key="layout"/>
                        <IsEquals key="layout" value="transform"/>
                        <IsPresent key="proximity.mtg.flipped.proximity.types.creature"/>
                        <IsEquals key="proximity.mtg.front_face"/>
                    </conditions>
                </TextLayer>
                <SquishBox>
                    <main id="set_symbol">
                        <SpacingLayer x="2900" y="2519" width="10" height="220"/>
                        <Group>
                            <Selector>
                                <!-- Certain sets don't use a uniform color palette, so this is a necessary evil -->
                                <SVG x="2922" y="2628" src="${rarity}/${proximity.options.set_symbol}" width="350" height="155" horizontal_alignment="end">
                                    <conditions>
                                        <FileExists src="${rarity}/${proximity.options.set_symbol}.svg"/>

                                    </conditions>
                                </SVG>
                                <SVG x="2922" y="2628" src="${proximity.options.set_symbol}" width="350" height="155" horizontal_alignment="end">
                                    <conditions>
                                        <FileExists src="${proximity.options.set_symbol}.svg"/>
                                    </conditions>
                                </SVG>
                            </Selector>
                            <CardModifier key="proximity.options.set_symbol" value="pz1">
                                <Or>
                                    <Not>
                                        <IsPresent key="proximity.options.set_symbol"/>
                                    </Not>
                                    <Not>
                                        <FileExists src="${proximity.options.set_symbol}.svg"/>
                                    </Not>
                                </Or>
                            </CardModifier>
                            <conditions>
                                <IsEquals key="proximity.options.show_set_symbol"/>
                            </conditions>
                        </Group>
                    </main>
                    <flex>
                        <Selector id="types">
                            <TextLayer id="back" x="381" y="2665" value="${type_line}">
                                <AttributeModifier name="x" value="531">
                                    <IsPresent key="color_indicator"/>
                                    <FileExists src="../../overlays/color_indicators/$join{color_indicator}.png"/>
                                </AttributeModifier>
                            </TextLayer>
                            <Style font="Beleren2016-Bold" color="#000000" size="135" kerning="2"/>
                            <Style font="Beleren2016-Bold" color="#FFFFFF" size="135" kerning="2">
                                <conditions>
                                    <IsPresent key="layout"/>
                                    <Or>
                                        <IsEquals key="layout" value="modal_dfc"/>
                                        <IsEquals key="layout" value="transform"/>
                                    </Or>
                                    <IsEquals key="proximity.mtg.front_face" value="false"/>
                                </conditions>
                            </Style>
                        </Selector>
                    </flex>
                </SquishBox>
                <ImageLayer src="overlays/color_indicators/$join{color_indicator}">
                    <conditions>
                        <IsPresent key="color_indicator"/>
                        <FileExists src="../../overlays/color_indicators/$join{color_indicator}.png"/>
                    </conditions>
                </ImageLayer>
                <Group id="pt">
                    <Selector>
                        <ImageLayer id="vehicle">
                            <conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="monocolored" src="$join{colors}">
                            <conditions>
                                <IsEquals key="proximity.mtg.color_count" value="1"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="artifact">
                            <conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="colorless">
                            <conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="gold"/>
                    </Selector>
                    <Selector>
                        <TextLayer id="vehicle" x="2740" y="4062" alignment="center" value="${power}/${toughness}">
                            <Style font="Beleren2016-Bold" color="#FFFFFF" size="160"/>
                            <conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </conditions>
                        </TextLayer>
                        <TextLayer id="creature" x="2740" y="4062" alignment="center" value="${power}/${toughness}">
                            <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                            <conditions>
                                <IsPresent key="proximity.mtg.types.creature"/>
                            </conditions>
                        </TextLayer>
                    </Selector>
                    <conditions>
                        <Or>
                            <IsPresent key="proximity.mtg.types.creature"/>
                            <IsPresent key="proximity.mtg.types.vehicle"/>
                        </Or>
                    </conditions>
                </Group>
                <Group id="oracle_text">
                    <TextLayer id="mutate" value="$oracle_text{proximity.util.mutate_text}" x="400" y="2800" width="2488" height="500">
                        <conditions>
                            <IsPresent key="keywords.mutate"/>
                        </conditions>
                    </TextLayer>
                    <VerticalLayout x="400" y="2795" width="2488" height="1190" alignment="middle">
                        <AttributeModifier name="height" value="1037">
                            <IsPresent key="layout"/>
                            <IsEquals key="layout" value="modal_dfc"/>
                            <Not>
                                <IsPresent key="keywords.mutate"/>
                            </Not>
                        </AttributeModifier>
                        <AttributeModifier name="height" value="642">
                            <Not>
                                <And>
                                    <IsPresent key="layout"/>
                                    <IsEquals key="layout" value="modal_dfc"/>
                                </And>
                            </Not>
                            <IsPresent key="keywords.mutate"/>
                        </AttributeModifier>
                        <AttributeModifier name="height" value="302">
                            <IsPresent key="layout"/>
                            <IsEquals key="layout" value="modal_dfc"/>
                            <IsPresent key="keywords.mutate"/>
                        </AttributeModifier>
                        <AttributeModifier name="y" value="3342">
                            <IsPresent key="keywords.mutate"/>
                        </AttributeModifier>
                        <TextLayer value="$oracle_text{oracle_text}">
                            <conditions>
                                <IsPresent key="oracle_text"/>
                            </conditions>
                        </TextLayer>
                        <VerticalLayout id="flavor">
                            <VerticalLayout>
                                <SpacingLayer id="spacing1" width="10" height="75"/>
                                <Selector>
                                    <ImageLayer id="bar" x="36" src="../../overlays/flavor_bar">
                                        <conditions>
                                            <IsEquals key="proximity.options.flavor_bar"/>
                                        </conditions>
                                    </ImageLayer>
                                    <SpacingLayer width="10" height="14"/>
                                </Selector>
                                <SpacingLayer id="spacing2" width="10" height="65"/>
                                <conditions>
                                    <IsPresent key="oracle_text"/>
                                    <Not>
                                        <IsEquals key="oracle_text" value=""/>
                                    </Not>
                                </conditions>
                            </VerticalLayout>
                            <TextLayer value="$flavor_text{flavor_text}"/>
                            <conditions>
                                <IsPresent key="flavor_text"/>
                                <IsEquals key="proximity.options.flavor_text"/>
                            </conditions>
                        </VerticalLayout>
                    </VerticalLayout>
                    <Wrap>
                        <rect x="2472" y="3869" width="535" height="315"/>
                        <conditions>
                            <Or>
                                <IsPresent key="proximity.mtg.types.creature"/>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </Or>
                        </conditions>
                    </Wrap>
                    <Wrap>
                        <rect x="2672" y="3669" width="336" height="168"/>
                        <conditions>
                            <IsEquals key="layout" value="transform"/>
                            <IsPresent key="proximity.mtg.flipped.proximity.mtg.types.creature"/>
                        </conditions>
                    </Wrap>
                    <Wrap>
                        <rect x="2472" y="3869" width="535" height="315"/>
                        <rect x="2672" y="3669" width="336" height="168"/>
                        <conditions>
                            <IsEquals key="layout" value="transform"/>
                            <IsPresent key="proximity.mtg.flipped.proximity.mtg.types.creature"/>
                            <IsEquals key="proximity.mtg.types.creature"/>
                        </conditions>
                    </Wrap>
                    <Style font="MPlantin" italicFont="MPlantin-Italic" color="#000000" size="135"/>
                </Group>
                <Group id="bottom_text">
                    <HorizontalLayout id="set_lang_and_artist" x="335" y="4209">
                        <TextLayer y="2" value="${set}">
                            <Style font="Gotham-Medium-Regular" size="68" capitalization="all_caps" kerning="10">
                                <outline color="#000000" weight="0"/>
                            </Style>
                        </TextLayer>
                        <SpacingLayer height="5" width="13"/>
                        <TextLayer value="•">
                            <Style font="Altone" size="69"/>
                        </TextLayer>
                        <SpacingLayer height="5" width="28"/>
                        <TextLayer id="lang" value="${lang}" y="2">
                            <Style font="Gotham-Medium-Regular" size="68" capitalization="all_caps" kerning="12"/>
                        </TextLayer>
                        <SpacingLayer height="5" width="27"/>
                        <HorizontalLayout>
                            <TextLayer id="brush" y="2" value="a">
                                <Style font="NDPMTG" size="80"/>
                            </TextLayer>
                            <SpacingLayer height="5" width="26"/>
                            <TextLayer id="artist" value="${artist}">
                                <Style font="Beleren Small Caps" size="75" kerning="1.5"/>
                            </TextLayer>
                        </HorizontalLayout>
                    </HorizontalLayout>
                    <Group id="disclaimer">
                        <TextLayer x="335" y="4131" value="2021 Custom Proxy">
                            <Style font="Altone" size="70"/>
                        </TextLayer>
                        <TextLayer value="NOT FOR SALE" x="1010" y="4136">
                            <Style font="Beleren2016-Bold" size="71" kerning="1"/>
                        </TextLayer>
                    </Group>
                    <Selector id="copyright">
                        <TextLayer value="™ &amp; © 2021 Wizards of the Coast" alignment="right" x="2956" y="4207">
                            <Style font="MPlantin" size="68"/>
                            <conditions>
                                <Or>
                                    <IsPresent key="proximity.mtg.types.planeswalker"/>
                                    <IsPresent key="proximity.mtg.types.creature"/>
                                    <IsPresent key="proximity.mtg.types.vehicle"/>
                                </Or>
                            </conditions>
                        </TextLayer>
                        <TextLayer value="™ &amp; © 2021 Wizards of the Coast" alignment="right" x="2956" y="4130">
                            <Style font="MPlantin" size="68"/>
                        </TextLayer>
                        <conditions>
                            <IsEquals key="proximity.mtg.options.copyright"/>
                        </conditions>
                    </Selector>
                    <Style color="#FFFFFF">
                        <outline color="#000000" weight="10"/>
                        <conditions>
                            <IsEquals key="proximity.mtg.options.bottom_text_outline"/>
                        </conditions>
                    </Style>
                    <Style color="#FFFFFF"/>
                </Group>
                <Group id="overlays">
                    <Group id="loyalty">
                        <ImageLayer src="../loyalty"/>
                        <TextLayer x="2782" y="4073" alignment="center" value="${loyalty}">
                            <Style font="Beleren2016-Bold" size="170" color="#FFFFFF"/>
                        </TextLayer>
                        <conditions>
                            <IsPresent key="proximity.mtg.types.planeswalker"/>
                        </conditions>
                    </Group>
                    <Group id="mdfc">
                        <Fork>
                            <Selector id="top">
                                <ImageLayer id="artifact">
                                    <conditions>
                                        <IsEquals key="colorless_artifact"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colorless">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colored" src="$join{colors}">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="1"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="gold"/>
                            </Selector>
                            <Selector id="bottom">
                                <ImageLayer id="colorless">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.flipped.proximity.mtg.color_count" value="0"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="colored" src="$join{proximity.mtg.flipped.colors}">
                                    <conditions>
                                        <IsEquals key="proximity.mtg.flipped.proximity.mtg.color_count" value="1"/>
                                    </conditions>
                                </ImageLayer>
                                <ImageLayer id="gold"/>
                            </Selector>
                            <branches>
                                <Branch id="front">
                                    <IsEquals key="proximity.mtg.front_face"/>
                                </Branch>
                                <Branch id="back"/>
                            </branches>
                        </Fork>
                        <conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </conditions>
                    </Group>
                    <Group id="transform">
                        <ImageLayer id="sun">
                            <conditions>
                                <Or>
                                    <IsPresent key="frame_effects.sunmoondfc"/>
                                    <IsEquals key="set" value="mid"/>
                                </Or>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="moon">
                            <conditions>
                                <Or>
                                    <IsPresent key="frame_effects.sunmoondfc"/>
                                    <IsEquals key="set" value="mid"/>
                                </Or>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="pwo">
                            <conditions>
                                <IsPresent key="frame_effects.originpwdfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="pw">
                            <conditions>
                                <IsPresent key="frame_effects.originpwdfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="compass">
                            <conditions>
                                <IsPresent key="frame_effects.compasslanddfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="land">
                            <conditions>
                                <IsPresent key="frame_effects.compasslanddfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="eldrazi moon">
                            <conditions>
                                <IsPresent key="frame_effects.mooneldrazidfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </conditions>
                        </ImageLayer>
                        <ImageLayer id="eldrazi">
                            <conditions>
                                <IsPresent key="frame_effects.mooneldrazidfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </conditions>
                        </ImageLayer>
                        <conditions>
                            <IsEquals key="layout" value="transform"/>
                        </conditions>
                    </Group>
                </Group>
                <SquishBox id="flipped">
                    <main id="cost">
                        <TextLayer x="1435" y="4000" alignment="right" value="${proximity.mtg.flipped.mana_cost}">
                            <Style font="NDPMTG" size="125"/>
                        </TextLayer>
                    </main>
                    <flex id="types">
                        <TextLayer x="345" y="4000" value="${proximity.mtg.flipped.proximity.mtg.main_types}">
                            <Style font="Beleren2016-Bold" color="#FFFFFF" size="100"/>
                            <conditions>
                                <IsEquals key="proximity.front_face"/>
                            </conditions>
                        </TextLayer>
                        <TextLayer x="345" y="4000" value="${proximity.mtg.flipped.proximity.mtg.main_types}">
                            <Style font="Beleren2016-Bold" color="#000000" size="100"/>
                            <conditions>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </conditions>
                        </TextLayer>
                    </flex>
                    <conditions>
                        <IsEquals key="layout" value="modal_dfc"/>
                    </conditions>
                </SquishBox>
            </Group>
        </Selector>
        <Noise x="0" y="4478" width="3288" height="10"/>
    </layers>
</Template>